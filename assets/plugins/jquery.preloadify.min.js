jQuery(function(){jQuery.fn.preloadify=function(s){var g={delay:0,imagedelay:0,mode:"parallel",preload_parent:"a",check_timer:200,ondone:function(){},oneachload:function(i){},fadein:700,force_icon:false,preloader_tpl:""};var s=jQuery.extend(g,s),q=jQuery(this),d,k=0,h=s.imagedelay,b=0,o=q.find("img").css({display:"block",visibility:"hidden",opacity:0,position:"relative","z-index":1}),c=[],m=function(j,i){jQuery(j).css("visibility","visible").delay(i).animate({opacity:1},s.fadein,function(){jQuery(this).parent().removeClass("preloader");if(s.preloader_tpl!=""){jQuery(this).parent().find(".preloader").animate({opacity:0},400,function(){jQuery(this).remove()})}})};o.each(function(){if(jQuery(this).parent(s.preload_parent).length==0){if(s.preloader_tpl!=""){jQuery(this).parent().prepend("<div class='preloader'></div>");jQuery(this).parent().find(".preloader").append(s.preloader_tpl)}else{jQuery(this).wrap("<a class='preloader' />")}}else{if(s.preloader_tpl!=""){jQuery(this).parent().prepend("<div class='preloader'></div>");jQuery(this).parent().find(".preloader").append(s.preloader_tpl)}else{jQuery(this).parent().addClass("preloader")}}c[k++]=false});o=jQuery.makeArray(o);b=0;function e(j){if(c[j]==false){b++;s.oneachload(o[j]);c[j]=true}if(s.imagedelay==0&&s.delay==0){jQuery(o[j]).css("visibility","visible").animate({opacity:1},700)}else{if(s.delay==0){m(o[j],h);h+=s.imagedelay}else{if(s.imagedelay==0){m(o[j],s.delay)}else{m(o[j],(s.delay+h));h+=s.imagedelay}}}}function l(){for(k=0;k<o.length;k++){if(o[k].complete==true){e(k)}}}function f(){if(o[k].complete==true){e(k);k++}}k=0;h=s.imagedelay;function r(){d=setInterval(function(){if(b>=c.length){clearInterval(d);s.ondone();return}if(s.mode=="parallel"){l()}else{f()}},s.check_timer)}if(s.force_icon==true){var a=jQuery(".preloader").css("background-image");var n=/url\(|\)|"|'/g;a=a.replace(n,"");var p=jQuery("<img />",{id:"loadingicon",src:a}).hide().appendTo("body");d=setInterval(function(){if(p[0].complete==true){clearInterval(d);setTimeout(function(){r()},s.check_timer);p.remove();return}},50)}else{r()}}});